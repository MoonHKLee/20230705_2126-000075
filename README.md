# 1. 지원자 정보 

2126-000075_이문혁_서버 개발자(HIGHLIGHT 채용)

# 2. 프로젝트 설명 

블로그 글을 검색하고, 검색 순위 및 검색 수를 확인할 수 있습니다.

## 2.1 환경
- Java 11
- Spring Boot 2.7.13
- Gradle
- H2 Database
- JPA

## 2.2 사용 라이브러리
- Lombok
  - 코드의 가독성, 코드 중복 제거를 위해 사용했습니다.
- AssertJ
  - 테스트코드의 가독성을 위해 사용했습니다.

## 2.3 API 명세
### 2.3.1 블로그 검색

| 메서드  | URL                         |
|------|-----------------------------|
| GET  | http://localhost:8080/blogs |
### 쿼리 파라미터

| 이름    | 타입    | 설명                                              | 필수  | 기본값      |
|-------|---------|-------------------------------------------------|-----|----------|
| query | String  | 검색어                                             | O   | -        |
| size  | Integer | 검색 결과 수 (1 ~ 50)                                | X   | 10       |
| page  | Integer | 페이지 (1 ~ 50)                                    | X   | 1        |
| sort  | String  | 정렬 순서 [정확도(accuracy, sim) / 최신순(recency, date)] | X   | accuracy |

### 응답   

본문

| 이름    | 타입      | 설명                         |
|-------|---------|----------------------------|
| blogs | blog[]  | 블로그 검색 결과                  |

blogs

| 이름      | 타입     | 설명         |
|----------|----------|------------|
| title    | String   | 게시글 제목  |
| content  | String   | 게시글 본문  |
| url      | String   | 게시글 링크  |
| blogName | String   | 블로그 이름  |

### 2.3.2 랭킹 호출   

| 메서드  | URL                           |
|------|-------------------------------|
| GET  | http://localhost:8080/ranking |

### 응답

본문

| 이름      | 타입        | 설명       |
|---------|-----------|----------|
| ranking | ranking[] | 랭킹 호출 결과 |

ranking

| 이름      | 타입      | 설명     |
|---------|---------|--------|
| keyword | String  | 검색된 단어 |
| hit     | Integer | 검색된 횟수 |


## 2.4 설명
### 2.4.1 디렉토리 구조
```
blogsearch
 ┠─ api : 외부로 노출하는 RestController가 담긴 패키지
 ┠─ exception : 공통 예외처리를 진행하는 패키지
 ┠─ ranking : 랭킹 조회 관련 기능이 모여있는 패키지
 ┠─ search : 검색 관련 기능이 모여있는 패키지
 ┗─ util : 공통으로 사용되는 유틸리티가 모여있는 패키지
```
### 2.4.2 구현 내용 설명
#### 2.4.2.1 블로그 검색
> 1. 검색어를 받아 검색 결과를 반환합니다.
> 2. 검색 결과는 sort 파라미터를 활용하여 정확도와 최신순으로 정렬할 수 있습니다.
> 3. 검색 결과는 1 ~ 50개 까지 조회할 수 있습니다.
> 4. 검색 결과는 1 ~ 50페이지 까지 조회할 수 있습니다.
> 5. 검색 결과는 게시글 제목, 게시글 본문, 게시글 링크, 블로그 이름을 포함합니다.
> 6. 기본 검색은 카카오 블로그 검색을 사용합니다.
> 7. 카카오 블로그 장애상황 발생시 자동으로 네이버 블로그 검색을 활용합니다.

#### 2.4.2.2 랭킹 조회
> 1. 검색된 단어와 검색된 횟수를 반환합니다.
> 2. 검색된 단어는 10개 까지 조회할 수 있습니다.
> 3. 대용량 트래픽 발생 시 랭킹 조회를 위한 TopRank 자료구조를 활용합니다.
> 4. TopRank 자료구조는 정렬된 상태로 유지되며, 검색된 횟수가 높은 순서대로 조회할 수 있습니다.
> 5. TopRank 자료구조는 스레드 안전성을 고려하여 작성하였습니다.
> 6. 동시성 이슈를 고려하여 키워드 별로 검색된 횟수의 정확도를 높였습니다.
> 7. Hit 애노테이션을 생성해서 검색시 검색된 횟수를 증가시키는 방법으로 의존성을 분리했습니다.

#### 2.4.2.3 테스트
> 1. 인수테스트를 작성했습니다.
> 2. 단위테스트는 커버리지 90% 이상을 유지하도록 작성했습니다.
  > ![image](https://github.com/MoonHKLee/20230705_2126-000075/assets/47442178/64a55ada-465c-4d7f-bb7b-a331434cd735)
> 3. 보기 쉽도록 하기 위해 테스트 메서드명에 한글을 활용했습니다.

#### 2.4.2.4 기타
> 1. 패키지간 의존성을 최대한 분리하고 한 방향으로 흐르도록 작성했습니다. 의존 순환을 없앴습니다.
> 2. 스프링 부트를 활용해 기본 properties 설정을 최소화했습니다.
> 3. 스프링 부트를 활용해 yml 파일의 설정을 통해 등록된 카카오/네이버 서비스를 on/off 할 수 있습니다.  


# 3.빌드 결과물
- [[깃허브 다운로드]](https://github.com/MoonHKLee/20230705_2126-000075/blob/master/lib/blog-search-0.0.1-SNAPSHOT.jar)
- [[구글드라이브 다운로드]](https://drive.google.com/file/d/1snTVwP26JZyBE1YGW5xxp5_mezNLI8YL/view?usp=sharing)
```shell
$ java -jar blog-search-0.0.1-SNAPSHOT.jar
```
